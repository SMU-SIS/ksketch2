<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 creationComplete="init()">
	<fx:Script>
		<![CDATA[
			
			public function init():void
			{
				enterInterpolateState();
				enterInteractionState();
				enterEnabledState();
				drawMenu();
			}
			
			public function enterRecordState():void
			{
				rotationTrigger.graphics.clear();
				rotationTrigger.graphics.beginFill(0x8C0303);
				rotationTrigger.graphics.drawCircle(0,0, 185);
				rotationTrigger.graphics.drawCircle(0,0, 135);
				rotationTrigger.graphics.endFill();
				
				freeTransformTrigger.graphics.clear();
				freeTransformTrigger.graphics.beginFill(0xBF0404);
				freeTransformTrigger.graphics.drawCircle(0,0, 135);
				freeTransformTrigger.graphics.endFill();
				
				centroid.graphics.clear();
				centroid.graphics.beginFill(0xF2F9F9);
				centroid.graphics.drawCircle(0,0, 27.5);
				centroid.graphics.endFill();
				
				dragTrigger.graphics.clear();
				dragTrigger.graphics.lineStyle(2, 0x8C0303);
				dragTrigger.graphics.beginFill(0xBF0404);
				dragTrigger.graphics.moveTo(0, -220);
				dragTrigger.graphics.lineTo(-25, -195);
				dragTrigger.graphics.lineTo(25, -195);
				dragTrigger.graphics.lineTo(0, -220);
				dragTrigger.graphics.endFill();
			}
			
			public function enterInterpolateState():void
			{
				rotationTrigger.graphics.clear();
				rotationTrigger.graphics.beginFill(0x242426);
				rotationTrigger.graphics.drawCircle(0,0, 185);
				rotationTrigger.graphics.drawCircle(0,0, 135);
				rotationTrigger.graphics.endFill();
				
				freeTransformTrigger.graphics.clear();
				freeTransformTrigger.graphics.beginFill(0x46494F);
				freeTransformTrigger.graphics.drawCircle(0,0, 135);
				freeTransformTrigger.graphics.endFill();
				
				centroid.graphics.clear();
				centroid.graphics.beginFill(0xF2F9F9);
				centroid.graphics.drawCircle(0,0, 27.5);
				centroid.graphics.endFill();
				
				dragTrigger.graphics.clear();
				dragTrigger.graphics.lineStyle(2, 0x46494F);
				dragTrigger.graphics.beginFill(0x242426);
				dragTrigger.graphics.moveTo(0, -220);
				dragTrigger.graphics.lineTo(-25, -195);
				dragTrigger.graphics.lineTo(25, -195);
				dragTrigger.graphics.lineTo(0, -220);
				dragTrigger.graphics.endFill();
			}
			
			public function enterInteractionState():void
			{
				rotationTrigger.alpha = 0.75;
				freeTransformTrigger.alpha = 0.75;
				centroid.alpha = 1.0;
				dragTrigger.alpha = 1.0;
			}
			
			public function enterEditDirectionState():void
			{
				rotationTrigger.alpha = 0.4;
				freeTransformTrigger.alpha = 0.4;
				centroid.alpha = 0.5;
				dragTrigger.alpha = 1.0;
			}
			
			public function enterDisabledState():void
			{
				enterInterpolateState();
				alpha = 0.4;
			}
			
			public function enterEnabledState():void
			{
				enterInterpolateState();
				alpha = 1.0;
			}
			
			public function drawMenu():void
			{
				var i:int =0;
				var nIterations:int = 60;
				var stepValue:Number = Math.PI/180;
				var sectorRadius:Number = 250;
				var point:Point;
				
				button1.graphics.lineStyle(3, 0xBDBDBD);
				button1.graphics.beginFill(0xFFFFFF);
				button1.graphics.moveTo(0,0);
				
				for(i = 0; i < nIterations; i++)
				{
					point = Point.polar(sectorRadius, i*stepValue);
					button1.graphics.lineTo(point.x, point.y);
				}
				
				stepValue = Math.PI/360;
				
				button2.graphics.lineTo(0,0);
				button2.graphics.endFill();
				
				button2.graphics.lineStyle(3, 0xBDBDBD);
				button2.graphics.beginFill(0xFFFFFF);
				button2.graphics.moveTo(0,0);
				
				for(i = 0; i < nIterations; i++)
				{
					point = Point.polar(sectorRadius, i*stepValue);
					button2.graphics.lineTo(point.x, point.y);
				}
				
				button2.graphics.lineTo(0,0);
				button2.graphics.endFill();
				widgetContextMenu.visible = false;
			}
		]]>
	</fx:Script>
	
	<s:Group id="rotationTrigger"/>
	<s:Group id="freeTransformTrigger"/>
	<s:Group>
		<s:Group id="centroid"/>
		<s:Group id="widgetContextMenu">
			<s:Group id="button1"/>
			<s:Group id="button2"/>
		</s:Group>
	</s:Group>
	<s:Group id="dragTrigger"/>
</s:Group>
