<?xml version="1.0" encoding="utf-8"?>
<!--
*Copyright 2010-2012 Singapore Management University
*Developed under a grant from the Singapore-MIT GAMBIT Game Lab

-->
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="0" height="15">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			
			private var _leftMarker:Marker;
			private var _rightMarker:Marker;
			public var selected:Boolean;
			
			public function initBar(left:Marker, right:Marker):void
			{
				_leftMarker = left;
				if(_leftMarker.selected)
					selected = true;
				_rightMarker = right;
				if(_rightMarker.selected)
					selected = true;
				_leftMarker.activityBars.push(this);
				_rightMarker.activityBars.push(this);
			}
			
			public function renderBar():void
			{
				x = _leftMarker.x+_leftMarker.width*0.75 - 2;
				bar.width = _rightMarker.x +_rightMarker.width*0.25 - x;
				
				if(_rightMarker.hasTransform)
				{
					if(_leftMarker.type == TimeWidget.OVERVIEW)
					{
						barOutline.weight = 2;
						barOutline.color = 0x000000;
						bar.height = 8;
						bar.y = 3.5;
						barFill.color = _leftMarker.markerFill.color;
					}
					else
					{
						bar.y = 1.5;
						bar.height = 12;
						barFill.alpha = 1.0;
						barOutline.alpha = 0;
						barFill.color = _leftMarker.markerColor;
					}
					
					
				}
				else
				{
					if(_leftMarker.type == TimeWidget.OVERVIEW)
					{
						bar.height = 4;
						bar.y = 4.5;
						barFill.color = _leftMarker.markerFill.color;
					}
					else
					{
						bar.y = 1.5;
						bar.height = 12;
						barFill.alpha = 0.15;
						barOutline.alpha = 0;
						barFill.color = _leftMarker.markerColor;
					}
					
					
				}
			}

			public function get leftMarker():Marker
			{
				return _leftMarker;
			}

			public function set leftMarker(value:Marker):void
			{
				_leftMarker = value;
			}

			public function get rightMarker():Marker
			{
				return _rightMarker;
			}

			public function set rightMarker(value:Marker):void
			{
				_rightMarker = value;
			}
		]]>
	</fx:Script>
	
	<s:Rect height="4" id="bar" width="0" y="8">                           
		<s:stroke>
			<s:SolidColorStroke color="0x000000" weight="1" id="barOutline"/>
		</s:stroke>
		<s:fill>
			<s:SolidColor color="0x000000" alpha="1" id="barFill"/>
		</s:fill>
	</s:Rect>
</s:Group>
